<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="using:AutoTranslator.Models.Enums"
        xmlns:vm="using:AutoTranslator.ViewModels.Pages"
        xmlns:loc="clr-namespace:AutoTranslator.Services.Static"
        x:Class="AutoTranslator.CreateProjectDialog"
        x:DataType="vm:CreateProjectDialogViewModel"
        Width="400"
        Height="280"
        CanResize="False"
        WindowStartupLocation="CenterOwner"
        Title="Создать проект">

    <Grid>
        <!-- Основной контент -->
        <StackPanel Margin="20" Spacing="15">

            <TextBlock Text="{loc:Loc Create_Project}"
                       FontSize="18"
                       FontWeight="Bold"/>

            <StackPanel>
                <TextBlock Text="{loc:Loc Name}"/>
                <TextBox Text="{Binding ProjectName}"/>
            </StackPanel>

            <Grid ColumnDefinitions="*,Auto,*" ColumnSpacing="10">
                <ComboBox Grid.Column="0" 
                          ItemsSource="{Binding AvailableLanguages}"
                          SelectedItem="{Binding SelectedSourceLanguage}">
                    <ComboBox.Resources>
                        <converters:LanguageDisplayConverter x:Key="LanguageDisplayConverter"/>
                    </ComboBox.Resources>
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Converter={StaticResource LanguageDisplayConverter}}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <TextBlock Grid.Column="1"
                           Text="→"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"/>
                
                <ComboBox Grid.Column="2" 
                          ItemsSource="{Binding AvailableLanguages}"
                          SelectedItem="{Binding SelectedTargetLanguage}">
                    <ComboBox.Resources>
                        <converters:LanguageDisplayConverter x:Key="LanguageDisplayConverter"/>
                    </ComboBox.Resources>
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Converter={StaticResource LanguageDisplayConverter}}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </Grid>

            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Spacing="10"
                        Margin="0,10,0,0">
                <Button Content="{loc:Loc Cancel}"
                        Command="{Binding CancelCommand}"/>
                <Button Content="{loc:Loc Create}"
                        Command="{Binding CreateProjectCommand}"/>
            </StackPanel>
        </StackPanel>

        <!-- Всплывающий статус (поверх основного контента) -->
        <Border Background="#80000000"
                CornerRadius="5"
                Padding="10,5"
                HorizontalAlignment="Center"
                VerticalAlignment="Top"
                Margin="0,10,0,0"
                IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
            <TextBlock Text="{Binding StatusMessage}"
                       Foreground="White"
                       FontSize="12"/>
        </Border>
    </Grid>
</Window>